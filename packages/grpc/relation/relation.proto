syntax = "proto3";

package relation;
option go_package = "github.com/jonashiltl/sessions-backend/packages/grpc/relation";

service RelationService {
    rpc FriendRequest (FriendRequestRequest) returns (FriendRelation) {};
    rpc AcceptFriend (AcceptFriendRequest) returns (FriendRelation) {};
    rpc GetFriendRelation (GetFriendRelationRequest) returns (FriendRelation) {};
    rpc GetFriendsOfUser (GetFriendsOfUserRequest) returns (PagedFriendRelations) {};
}

message FriendRelation {
    string user_id = 1;
    string friend_id = 2;
    bool accepted = 3;
    string created_at = 4;
    string accepted_at = 5;
}

message FriendRequestRequest {
    string user_id = 1;
    string friend_id = 2;
}

message AcceptFriendRequest {
    string user_id = 1;
    string friend_id = 2;
}

message GetFriendRelationRequest {
    string user_id = 1;
    string friend_id = 2;
}

message PagedFriendRelations {
    repeated FriendRelation relations = 1;
    string next_page = 2;
}

message GetFriendsOfUserRequest {
    string user_id = 1;
    string next_page = 2;
    uint32 limit = 3;
}